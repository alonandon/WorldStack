<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Country Size Ranking Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #e0f2fe 0%, #c7d2fe 100%);
            min-height: 100vh;
            padding: 2rem;
        }

        .container {
            max-width: 700px;
            margin: 0 auto;
            background: white;
            border-radius: 1rem;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            padding: 2rem;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        h1 {
            font-size: 1.875rem;
            color: #1f2937;
        }

        .header-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .new-game-btn, .info-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: #4f46e5;
            color: white;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            font-size: 1rem;
            transition: background 0.2s;
        }

        .new-game-btn:hover, .info-btn:hover {
            background: #4338ca;
        }

        .info-btn {
            background: #6366f1;
        }

        .info-btn:hover {
            background: #4f46e5;
        }

        .stats {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            color: #4b5563;
        }

        .timer {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-family: 'Courier New', monospace;
            font-size: 1.125rem;
        }

        .score {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-left: auto;
            font-weight: bold;
            font-size: 1.25rem;
        }

        .instructions {
            padding: 1rem;
            background: #dbeafe;
            border-radius: 0.5rem;
            margin-bottom: 1.5rem;
            color: #1f2937;
        }

        .instructions strong {
            color: #2563eb;
        }

        .countries-list {
            margin-bottom: 1.5rem;
        }

        .country-item {
            padding: 1rem;
            margin-bottom: 0.75rem;
            border: 2px solid #d1d5db;
            border-radius: 0.5rem;
            background: white;
            cursor: move;
            transition: all 0.2s ease;
            user-select: none;
        }

        .country-item:hover {
            border-color: #818cf8;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .country-item.dragging {
            opacity: 0.4;
            cursor: grabbing;
        }

        .country-item.drag-over {
            border-color: #4f46e5;
            border-style: dashed;
            transform: scale(1.02);
        }

        .country-item.correct {
            background: #dcfce7;
            border-color: #4ade80;
        }

        .country-item.incorrect {
            background: #fee2e2;
            border-color: #f87171;
        }

        .country-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .country-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .country-number {
            font-size: 1.5rem;
            font-weight: bold;
            color: #9ca3af;
            min-width: 30px;
        }

        .country-name {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1f2937;
        }

        .country-area {
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
            color: #4b5563;
        }

        .submit-btn {
            width: 100%;
            padding: 0.75rem;
            background: #16a34a;
            color: white;
            border: none;
            border-radius: 0.5rem;
            font-size: 1.125rem;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s;
        }

        .submit-btn:hover {
            background: #15803d;
        }

        .results {
            text-align: center;
            padding: 1rem;
            background: #eef2ff;
            border-radius: 0.5rem;
        }

        .results-main {
            font-size: 1.125rem;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }

        .results-detail {
            font-size: 0.875rem;
            color: #4b5563;
        }

        .highlight {
            font-weight: bold;
            color: #4f46e5;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            max-width: 600px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-header h2 {
            font-size: 1.5rem;
            color: #1f2937;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #6b7280;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.25rem;
            transition: background 0.2s;
        }

        .close-btn:hover {
            background: #f3f4f6;
        }

        .modal-section {
            margin-bottom: 1.5rem;
        }

        .modal-section h3 {
            font-size: 1.125rem;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }

        .modal-section p {
            color: #4b5563;
            line-height: 1.6;
            margin-bottom: 0.5rem;
        }

        .modal-section ul {
            list-style: none;
            padding-left: 0;
            color: #4b5563;
        }

        .modal-section li {
            padding: 0.5rem 0;
            border-bottom: 1px solid #e5e7eb;
        }

        .modal-section li:last-child {
            border-bottom: none;
        }

        .formula {
            background: #f3f4f6;
            padding: 0.75rem;
            border-radius: 0.5rem;
            font-family: 'Courier New', monospace;
            margin: 0.5rem 0;
            color: #1f2937;
        }

        .example-box {
            background: #dbeafe;
            padding: 1rem;
            border-radius: 0.5rem;
            margin: 0.5rem 0;
        }

        .example-box strong {
            color: #1e40af;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Country Size Challenge</h1>
            <div class="header-buttons">
                <button class="info-btn" onclick="toggleModal()">
                    <span>‚ÑπÔ∏è</span>
                    Info
                </button>
                <button class="new-game-btn" onclick="startNewGame()">
                    <span>üîÑ</span>
                    New Game
                </button>
            </div>
        </div>

        <div class="stats">
            <div class="timer">
                <span>‚è±Ô∏è</span>
                <span id="timer">0:00</span>
            </div>
            <div class="score" id="score" style="display: none;">
                <span>üèÜ</span>
                <span id="scoreValue">0 pts</span>
            </div>
        </div>

        <div class="instructions">
            <p>Drag and drop to arrange countries from <strong>smallest to largest</strong> by total area!</p>
        </div>

        <div class="countries-list" id="countriesList"></div>

        <button class="submit-btn" id="submitBtn" onclick="submitAnswer()">Submit Answer</button>
        <div class="results" id="results" style="display: none;"></div>
    </div>

    <div class="modal" id="infoModal" onclick="closeModalOnBackdrop(event)">
        <div class="modal-content">
            <div class="modal-header">
                <h2>How Scoring Works</h2>
                <button class="close-btn" onclick="toggleModal()">√ó</button>
            </div>

            <div class="modal-section">
                <h3>üéØ Accuracy Score (0-100 points)</h3>
                <p>You earn points for each country placed in the <strong>correct position</strong>.</p>
                <div class="formula">(Correct Positions / 6) √ó 100</div>
                <ul>
                    <li><strong>6/6 correct</strong> = 100 points</li>
                    <li><strong>3/6 correct</strong> = 50 points</li>
                    <li><strong>0/6 correct</strong> = 0 points</li>
                </ul>
            </div>

            <div class="modal-section">
                <h3>‚ö° Time Bonus (0-50 points)</h3>
                <p>Complete the challenge faster to earn bonus points!</p>
                <div class="formula">(100 - Seconds Taken) √ó 0.5</div>
                <ul>
                    <li><strong>20 seconds</strong> = (100 - 20) √ó 0.5 = 40 bonus points</li>
                    <li><strong>60 seconds</strong> = (100 - 60) √ó 0.5 = 20 bonus points</li>
                    <li><strong>100+ seconds</strong> = 0 bonus points (no penalty)</li>
                </ul>
            </div>

            <div class="modal-section">
                <h3>üèÜ Total Score</h3>
                <div class="formula">Total = Accuracy Score + Time Bonus</div>
                <div class="example-box">
                    <strong>Example:</strong> Getting 5/6 countries correct in 30 seconds:
                    <br>‚Ä¢ Accuracy: (5/6) √ó 100 = <strong>83 points</strong>
                    <br>‚Ä¢ Time Bonus: (100 - 30) √ó 0.5 = <strong>35 points</strong>
                    <br>‚Ä¢ <strong>Total: 118 points</strong>
                </div>
                <p style="margin-top: 1rem;">The maximum possible score is <strong>150 points</strong> (perfect accuracy + fastest time).</p>
            </div>
        </div>
    </div>

    <script>
        const COUNTRIES = [
            { name: 'Russia', area: 17098242 },
            { name: 'Canada', area: 9984670 },
            { name: 'United States', area: 9833517 },
            { name: 'China', area: 9596961 },
            { name: 'Brazil', area: 8515767 },
            { name: 'Australia', area: 7692024 },
            { name: 'India', area: 3287263 },
            { name: 'Argentina', area: 2780400 },
            { name: 'Kazakhstan', area: 2724900 },
            { name: 'Algeria', area: 2381741 },
            { name: 'Saudi Arabia', area: 2149690 },
            { name: 'Mexico', area: 1964375 },
            { name: 'Indonesia', area: 1904569 },
            { name: 'Libya', area: 1759540 },
            { name: 'Iran', area: 1648195 },
            { name: 'Mongolia', area: 1564110 },
            { name: 'Peru', area: 1285216 },
            { name: 'Chad', area: 1284000 },
            { name: 'Niger', area: 1267000 },
            { name: 'Mali', area: 1240192 },
            { name: 'South Africa', area: 1221037 },
            { name: 'Colombia', area: 1141748 },
            { name: 'Ethiopia', area: 1104300 },
            { name: 'Bolivia', area: 1098581 },
            { name: 'Egypt', area: 1002450 },
            { name: 'Tanzania', area: 947303 },
            { name: 'Nigeria', area: 923768 },
            { name: 'Venezuela', area: 916445 },
            { name: 'Pakistan', area: 881912 },
            { name: 'Turkey', area: 783562 },
            { name: 'Chile', area: 756102 },
            { name: 'Myanmar', area: 676578 },
            { name: 'Afghanistan', area: 652230 },
            { name: 'France', area: 643801 },
            { name: 'Ukraine', area: 603500 },
            { name: 'Madagascar', area: 587041 },
            { name: 'Kenya', area: 580367 },
            { name: 'Thailand', area: 513120 },
            { name: 'Spain', area: 505992 },
            { name: 'Sweden', area: 450295 },
            { name: 'Morocco', area: 446550 },
            { name: 'Iraq', area: 438317 },
            { name: 'Paraguay', area: 406752 },
            { name: 'Japan', area: 377975 },
            { name: 'Germany', area: 357022 },
            { name: 'Finland', area: 338424 },
            { name: 'Vietnam', area: 331212 },
            { name: 'Malaysia', area: 330803 },
            { name: 'Norway', area: 323802 },
            { name: 'Poland', area: 312696 },
            { name: 'Italy', area: 301340 },
            { name: 'Philippines', area: 300000 },
            { name: 'Ecuador', area: 283561 },
            { name: 'New Zealand', area: 270467 },
            { name: 'United Kingdom', area: 242495 },
            { name: 'Ghana', area: 238533 },
            { name: 'Romania', area: 238397 },
            { name: 'Laos', area: 236800 },
            { name: 'Belarus', area: 207600 },
            { name: 'Senegal', area: 196722 },
            { name: 'Syria', area: 185180 },
            { name: 'Cambodia', area: 181035 },
            { name: 'Uruguay', area: 176215 },
            { name: 'Tunisia', area: 163610 },
            { name: 'Bangladesh', area: 147570 },
            { name: 'Nepal', area: 147516 },
            { name: 'Greece', area: 131957 },
            { name: 'Nicaragua', area: 130373 },
            { name: 'North Korea', area: 120538 },
            { name: 'Honduras', area: 112492 },
            { name: 'Cuba', area: 109884 },
            { name: 'Guatemala', area: 108889 },
            { name: 'Iceland', area: 103000 },
            { name: 'South Korea', area: 100210 },
            { name: 'Hungary', area: 93028 },
            { name: 'Portugal', area: 92090 },
            { name: 'Austria', area: 83871 },
            { name: 'Czech Republic', area: 78871 },
            { name: 'Panama', area: 75417 },
            { name: 'Ireland', area: 70273 },
            { name: 'Sri Lanka', area: 65610 },
            { name: 'Lithuania', area: 65300 },
            { name: 'Latvia', area: 64559 },
            { name: 'Croatia', area: 56594 },
            { name: 'Bosnia and Herzegovina', area: 51209 },
            { name: 'Costa Rica', area: 51100 },
            { name: 'Slovakia', area: 49037 },
            { name: 'Dominican Republic', area: 48671 },
            { name: 'Estonia', area: 45227 },
            { name: 'Denmark', area: 42933 },
            { name: 'Netherlands', area: 41850 },
            { name: 'Switzerland', area: 41284 },
            { name: 'Belgium', area: 30528 },
            { name: 'Albania', area: 28748 },
            { name: 'Israel', area: 20770 },
            { name: 'Slovenia', area: 20273 },
            { name: 'Kuwait', area: 17818 },
            { name: 'Jamaica', area: 10991 },
            { name: 'Lebanon', area: 10452 },
            { name: 'Cyprus', area: 9251 },
            { name: 'Luxembourg', area: 2586 },
            { name: 'Singapore', area: 733 },
            { name: 'Malta', area: 316 },
            { name: 'Monaco', area: 2 }
        ];

        let gameState = {
            countries: [],
            userOrder: [],
            timer: 0,
            timerInterval: null,
            playing: true
        };

        function shuffle(array) {
            const arr = [...array];
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr;
        }

        function startNewGame() {
            const shuffled = shuffle(COUNTRIES).slice(0, 6);
            gameState.countries = shuffled;
            gameState.userOrder = shuffled.map((_, i) => i);
            gameState.timer = 0;
            gameState.playing = true;

            document.getElementById('score').style.display = 'none';
            document.getElementById('submitBtn').style.display = 'block';
            document.getElementById('results').style.display = 'none';

            if (gameState.timerInterval) {
                clearInterval(gameState.timerInterval);
            }

            gameState.timerInterval = setInterval(() => {
                gameState.timer++;
                updateTimer();
            }, 1000);

            renderCountries();
        }

        function updateTimer() {
            const mins = Math.floor(gameState.timer / 60);
            const secs = gameState.timer % 60;
            document.getElementById('timer').textContent = 
                `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        function renderCountries() {
            const list = document.getElementById('countriesList');
            list.innerHTML = '';

            gameState.userOrder.forEach((countryIndex, position) => {
                const country = gameState.countries[countryIndex];
                const div = document.createElement('div');
                div.className = 'country-item';
                div.draggable = gameState.playing;
                div.dataset.position = position;

                div.innerHTML = `
                    <div class="country-content">
                        <div class="country-left">
                            <span class="country-number">${position + 1}</span>
                            <span class="country-name">${country.name}</span>
                        </div>
                        <span class="country-area" style="display: none;">${country.area.toLocaleString()} km¬≤</span>
                    </div>
                `;

                div.addEventListener('dragstart', handleDragStart);
                div.addEventListener('dragover', handleDragOver);
                div.addEventListener('dragenter', handleDragEnter);
                div.addEventListener('dragleave', handleDragLeave);
                div.addEventListener('drop', handleDrop);
                div.addEventListener('dragend', handleDragEnd);

                list.appendChild(div);
            });
        }

        let draggedElement = null;
        let draggedPosition = null;

        function handleDragStart(e) {
            if (!gameState.playing) return;
            draggedElement = e.currentTarget;
            draggedPosition = parseInt(e.currentTarget.dataset.position);
            e.currentTarget.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
        }

        function handleDragOver(e) {
            if (!gameState.playing || !draggedElement) return;
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
            
            const afterElement = e.currentTarget;
            if (draggedElement === afterElement) return;
            
            afterElement.classList.add('drag-over');
        }

        function handleDragEnter(e) {
            if (!gameState.playing || !draggedElement) return;
            e.preventDefault();
            
            const afterElement = e.currentTarget;
            if (draggedElement === afterElement) return;
            
            const afterPosition = parseInt(afterElement.dataset.position);
            
            // Reorder the array
            const newOrder = [...gameState.userOrder];
            const draggedItem = newOrder[draggedPosition];
            newOrder.splice(draggedPosition, 1);
            newOrder.splice(afterPosition, 0, draggedItem);
            
            gameState.userOrder = newOrder;
            draggedPosition = afterPosition;
            renderCountries();
            
            // Re-add dragging class to the element being dragged
            const items = document.querySelectorAll('.country-item');
            items[afterPosition].classList.add('dragging');
            draggedElement = items[afterPosition];
        }

        function handleDragLeave(e) {
            e.currentTarget.classList.remove('drag-over');
        }

        function handleDrop(e) {
            if (!gameState.playing) return;
            e.preventDefault();
            e.currentTarget.classList.remove('drag-over');
        }

        function handleDragEnd(e) {
            e.currentTarget.classList.remove('dragging');
            document.querySelectorAll('.country-item').forEach(item => {
                item.classList.remove('drag-over');
            });
            draggedElement = null;
            draggedPosition = null;
        }

        function submitAnswer() {
            if (!gameState.playing) return;

            gameState.playing = false;
            clearInterval(gameState.timerInterval);

            const correctOrder = gameState.countries
                .map((c, i) => ({ country: c, originalIndex: i }))
                .sort((a, b) => a.country.area - b.country.area)
                .map(item => item.originalIndex);

            let correctPositions = 0;
            gameState.userOrder.forEach((userIndex, position) => {
                if (correctOrder[position] === userIndex) {
                    correctPositions++;
                }
            });

            const accuracyScore = (correctPositions / 6) * 100;
            const timeBonus = Math.max(0, 100 - gameState.timer);
            const totalScore = Math.round(accuracyScore + timeBonus * 0.5);

            document.getElementById('scoreValue').textContent = `${totalScore} pts`;
            document.getElementById('score').style.display = 'flex';
            document.getElementById('submitBtn').style.display = 'none';

            const results = document.getElementById('results');
            results.innerHTML = `
                <div class="results-main">
                    You got <span class="highlight">${correctPositions}/6</span> in the correct position!
                </div>
                <div class="results-detail">
                    Accuracy: ${Math.round(accuracyScore)}% ‚Ä¢ Time: ${document.getElementById('timer').textContent}
                </div>
            `;
            results.style.display = 'block';

            const items = document.querySelectorAll('.country-item');
            items.forEach((item, position) => {
                const userIndex = gameState.userOrder[position];
                const isCorrect = correctOrder[position] === userIndex;
                item.classList.add(isCorrect ? 'correct' : 'incorrect');
                item.draggable = false;
                
                const areaSpan = item.querySelector('.country-area');
                areaSpan.style.display = 'block';
            });
        }

        function toggleModal() {
            const modal = document.getElementById('infoModal');
            modal.classList.toggle('active');
        }

        function closeModalOnBackdrop(event) {
            if (event.target.id === 'infoModal') {
                toggleModal();
            }
        }

        startNewGame();
    </script>
</body>
</html>
